<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#e46652">
    <title>Ember.js - DS.RootState</title>
		<meta property="st:title" content="Ember.js: DS.RootState" />
		<meta property="og:title" content="Ember.js: DS.RootState" />
		<meta property="og:description" content="Ember.js helps developers be more productive out of the box. Designed with developer ergonomics in mind, its friendly APIs help you get your job doneâ€”fast." />
		<meta property="og:image" content="http://emberjs.com/images/tomster-sm.png" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@emberjs" />
		<meta name="twitter:title" content="DS.RootState"/>
		<meta name="twitter:image" content="http://emberjs.com/images/tomster-twitter-card.png" />
    <link rel="shortcut icon" href="/images/favicon-b8f150dd.png" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <!--[if lte IE 7 ]><link href="/stylesheets/fonts/fontello-ie7-e008d616.css" rel="stylesheet" /><![endif]-->
    <link href="/stylesheets/site-87bea68d.css" rel="stylesheet" />
    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />
    
  </head>

  <body class="api api_data api_data_classes api_data_classes_DS not-responsive">

    <!--[if lt IE 9]>
      <script type="text/javascript" src="/javascripts/common-old-ie-a611d662.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script type="text/javascript" src="/javascripts/common-modern-e2066739.js"></script>
    <!--<![endif]-->

    <header class="header">
  <nav role="navigation" aria-label="main">
    <ul class="header-nav container">
      <li class="header-logo">
        <a href="http://emberjs.com/"><span class="visually-hidden">Ember homepage</span></a>
      <li><a href="/learn">Learn</a></li>
      <li><a href="http://guides.emberjs.com">Guides</a></li>
      <li class="active"><a href="/api">API</a></li>
      <li><a href="/community">Community</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/builds">Builds</a></li>
      <li class="header-search">
        <form>
          <input type="text" id="search-input" class="search-input" placeholder="Search ..."/>
        </form>
      </li>
    </ul>
  </nav>
</header>
        <div class="survey-reminder-wrapper">
      <div class="survey-reminder-container">
        The results of the
<a href="/ember-community-survey-2017">            2017 Ember Community Survey
        </a>!
      </div>
    </div>


    

    <div id="content-wrapper">
        <div id="sidebar">
              <ol id='toc-list'>
      <li class='level-1'>
        <a href="#">Projects</a>
        <ol>
          <li class='level-3 '>
            <a href="/api">Ember</a>
          </li>
          <li class='level-3 sub-selected'>
            <a href="/api/data">Ember Data</a>
          </li>
        </ol>
      </li>

      <li class='level-1'><a href="https://github.com/emberjs/data/commits/v2.12.0" target="_blank"> Tag: v2.12.0</a></li>


          <li class="level-1 ">
                  <a href='#'>Modules</a>

          <ol class="">
          
          <li class="level-3 ">
                        <a href="/api/data/modules/ember-data.html">ember-data</a>

          </li>
        
          </ol>
        
          </li>
        

          <li class="level-1 ">
                  <a href='#'>Namespaces</a>

          <ol class="">
          
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.html">DS</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/Ember.Date.html">Ember.Date</a>

          </li>
        
          </ol>
        
          </li>
        

          <li class="level-1 selected">
                  <a href='#'>Classes</a>

          <ol class="selected">
          
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.AbortError.html">DS.AbortError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Adapter.html">DS.Adapter</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.AdapterError.html">DS.AdapterError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.AdapterPopulatedRecordArray.html">DS.AdapterPopulatedRecordArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.BelongsToReference.html">DS.BelongsToReference</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.BooleanTransform.html">DS.BooleanTransform</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.BuildURLMixin.html">DS.BuildURLMixin</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.ConflictError.html">DS.ConflictError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.DateTransform.html">DS.DateTransform</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.EmbeddedRecordsMixin.html">DS.EmbeddedRecordsMixin</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Ember.HTMLBars.helpers.html">DS.Ember.HTMLBars.helpers</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Errors.html">DS.Errors</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.FilteredRecordArray.html">DS.FilteredRecordArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.ForbiddenError.html">DS.ForbiddenError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.HasManyReference.html">DS.HasManyReference</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.InvalidError.html">DS.InvalidError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.JSONAPIAdapter.html">DS.JSONAPIAdapter</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.JSONAPISerializer.html">DS.JSONAPISerializer</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.JSONSerializer.html">DS.JSONSerializer</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.ManyArray.html">DS.ManyArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Model.html">DS.Model</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.NotFoundError.html">DS.NotFoundError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.NumberTransform.html">DS.NumberTransform</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.PromiseArray.html">DS.PromiseArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.PromiseManyArray.html">DS.PromiseManyArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.PromiseObject.html">DS.PromiseObject</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.RESTAdapter.html">DS.RESTAdapter</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.RESTSerializer.html">DS.RESTSerializer</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.RecordArray.html">DS.RecordArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.RecordArrayManager.html">DS.RecordArrayManager</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.RecordReference.html">DS.RecordReference</a>

          </li>
        
          <li class="level-3 sub-selected">
                        <a href="/api/data/classes/DS.RootState.html">DS.RootState</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Serializer.html">DS.Serializer</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.ServerError.html">DS.ServerError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Snapshot.html">DS.Snapshot</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.SnapshotRecordArray.html">DS.SnapshotRecordArray</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Store.html">DS.Store</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.String.html">DS.String</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.StringTransform.html">DS.StringTransform</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.TimeoutError.html">DS.TimeoutError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.Transform.html">DS.Transform</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/DS.UnauthorizedError.html">DS.UnauthorizedError</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/Ember.HTMLBars.helpers.html">Ember.HTMLBars.helpers</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/Ember.Inflector.html">Ember.Inflector</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/IdentityMap.html">IdentityMap</a>

          </li>
        
          <li class="level-3 ">
                        <a href="/api/data/classes/RecordMap.html">RecordMap</a>

          </li>
        
          </ol>
        
          </li>
        
          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      <div id="content" class="has-sidebar">
        
  <h1 class="api-header">
  DS.RootState Class
    <a class="edit-page icon-pencil" target="_blank" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/model/states.js#L10">addon/-private/system/model/states.js:10</a>
</h1>

<hr>





<div class="class-info">


    <p>Defined in: <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/model/states.js#L10">addon/-private/system/model/states.js:10</a></p>

    <p>Module: <a href="/api/data/modules/ember-data.html">ember-data</a></p>
</div>

  <div class="description">
    <h3 class='anchorable-toc' id='toc_state'>State</h3>
<p>Each record has a <code>currentState</code> property that explicitly tracks what
state a record is in at any given time. For instance, if a record is
newly created and has not yet been sent to the adapter to be saved,
it would be in the <code>root.loaded.created.uncommitted</code> state.  If a
record has had local modifications made to it that are in the
process of being saved, the record would be in the
<code>root.loaded.updated.inFlight</code> state. (This state paths will be
explained in more detail below.)</p>

<p>Events are sent by the record or its store to the record&#39;s
<code>currentState</code> property. How the state reacts to these events is
dependent on which state it is in. In some states, certain events
will be invalid and will cause an exception to be raised.</p>

<p>States are hierarchical and every state is a substate of the
<code>RootState</code>. For example, a record can be in the
<code>root.deleted.uncommitted</code> state, then transition into the
<code>root.deleted.inFlight</code> state. If a child state does not implement
an event handler, the state manager will attempt to invoke the event
on all parent states until the root state is reached. The state
hierarchy of a record is described in terms of a path string. You
can determine a record&#39;s current state by getting the state&#39;s
<code>stateName</code> property:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>record.get(<span class="string"><span class="delimiter">'</span><span class="content">currentState.stateName</span><span class="delimiter">'</span></span>);
<span class="comment">//=&gt; &quot;root.created.uncommitted&quot;</span>
</pre></td>
</tr></table>
</div></div>
<p>The hierarchy of valid states that ship with ember data looks like
this:</p>
<div class="highlight text "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre>* root
  * deleted
    * saved
    * uncommitted
    * inFlight
  * empty
  * loaded
    * created
      * uncommitted
      * inFlight
    * saved
    * updated
      * uncommitted
      * inFlight
  * loading
</pre></td>
</tr></table>
</div></div>
<p>The <code>DS.Model</code> states are themselves stateless. What that means is
that, the hierarchical states that each of <em>those</em> points to is a
shared data structure. For performance reasons, instead of each
record getting its own copy of the hierarchy of states, each record
points to this global, immutable shared instance. How does a state
know which record it should be acting on? We pass the record
instance into the state&#39;s event handlers as the first argument.</p>

<p>The record passed as the first parameter is where you should stash
state about the record if needed; you should never store data on the state
object itself.</p>
<h3 class='anchorable-toc' id='toc_events-and-flags'>Events and Flags</h3>
<p>A state may implement zero or more events and flags.</p>
<h4 class='anchorable-toc' id='toc_events'>Events</h4>
<p>Events are named functions that are invoked when sent to a record. The
record will first look for a method with the given name on the
current state. If no method is found, it will search the current
state&#39;s parent, and then its grandparent, and so on until reaching
the top of the hierarchy. If the root is reached without an event
handler being found, an exception will be raised. This can be very
helpful when debugging new features.</p>

<p>Here&#39;s an example implementation of a state with a <code>myEvent</code> event handler:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>aState: DS.State.create({
  <span class="function">myEvent</span>: <span class="keyword">function</span>(manager, param) {
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Received myEvent with</span><span class="delimiter">&quot;</span></span>, param);
  }
})
</pre></td>
</tr></table>
</div></div>
<p>To trigger this event:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>record.send(<span class="string"><span class="delimiter">'</span><span class="content">myEvent</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>);
<span class="comment">//=&gt; &quot;Received myEvent with foo&quot;</span>
</pre></td>
</tr></table>
</div></div>
<p>Note that an optional parameter can be sent to a record&#39;s <code>send()</code> method,
which will be passed as the second parameter to the event handler.</p>

<p>Events should transition to a different state if appropriate. This can be
done by calling the record&#39;s <code>transitionTo()</code> method with a path to the
desired state. The state manager will attempt to resolve the state path
relative to the current state. If no state is found at that path, it will
attempt to resolve it relative to the current state&#39;s parent, and then its
parent, and so on until the root is reached. For example, imagine a hierarchy
like this:</p>
<div class="highlight text "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>* created
  * uncommitted &lt;-- currentState
  * inFlight
* updated
  * inFlight
</pre></td>
</tr></table>
</div></div>
<p>If we are currently in the <code>uncommitted</code> state, calling
<code>transitionTo(&#39;inFlight&#39;)</code> would transition to the <code>created.inFlight</code> state,
while calling <code>transitionTo(&#39;updated.inFlight&#39;)</code> would transition to
the <code>updated.inFlight</code> state.</p>

<p>Remember that <em>only events</em> should ever cause a state transition. You should
never call <code>transitionTo()</code> from outside a state&#39;s event handler. If you are
tempted to do so, create a new event and send that to the state manager.</p>
<h4 class='anchorable-toc' id='toc_flags'>Flags</h4>
<p>Flags are Boolean values that can be used to introspect a record&#39;s current
state in a more user-friendly way than examining its state path. For example,
instead of doing this:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="keyword">var</span> statePath = record.get(<span class="string"><span class="delimiter">'</span><span class="content">stateManager.currentPath</span><span class="delimiter">'</span></span>);
<span class="keyword">if</span> (statePath === <span class="string"><span class="delimiter">'</span><span class="content">created.inFlight</span><span class="delimiter">'</span></span>) {
  doSomething();
}
</pre></td>
</tr></table>
</div></div>
<p>You can say:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="keyword">if</span> (record.get(<span class="string"><span class="delimiter">'</span><span class="content">isNew</span><span class="delimiter">'</span></span>) &amp;&amp; record.get(<span class="string"><span class="delimiter">'</span><span class="content">isSaving</span><span class="delimiter">'</span></span>)) {
  doSomething();
}
</pre></td>
</tr></table>
</div></div>
<p>If your state does not set a value for a given flag, the value will
be inherited from its parent (or the first place in the state hierarchy
where it is defined).</p>

<p>The current set of flags are defined below. If you want to add a new flag,
in addition to the area below, you will also need to declare it in the
<code>DS.Model</code> class.</p>

<ul>
<li><a href="DS.Model.html#property_isEmpty">isEmpty</a></li>
<li><a href="DS.Model.html#property_isLoading">isLoading</a></li>
<li><a href="DS.Model.html#property_isLoaded">isLoaded</a></li>
<li><a href="DS.Model.html#property_hasDirtyAttributes">hasDirtyAttributes</a></li>
<li><a href="DS.Model.html#property_isSaving">isSaving</a></li>
<li><a href="DS.Model.html#property_isDeleted">isDeleted</a></li>
<li><a href="DS.Model.html#property_isNew">isNew</a></li>
<li><a href="DS.Model.html#property_isValid">isValid</a></li>
</ul>

  </div>




      </div>
    </div>

    <div class="footer">
  <div class="container">
    <div class="footer-info">
      Copyright 2017
      <a href="http://tilde.io">Tilde Inc.</a>
      <br>
      <a href="http://emberjs.com/team">Team</a> |
      <a href="http://emberjs.com/sponsors">Sponsors</a>
      <br>
      <a href="http://emberjs.com/security">Security</a> |
      <a href="http://emberjs.com/legal">Legal</a> |
      <a href="http://emberjs.com/logos">Logos</a>
      <br>
      <a href="http://emberjs.com/guidelines">Community Guidelines</a>
    </div>

    <div class="footer-statement">
      Ember.js is free, open source and always will be.
    </div>

    <div class="footer-social">
      <a href="http://twitter.com/emberjs" title="Twitter">
        <i class="icon-twitter"></i>
      </a>
      <a href="https://github.com/emberjs/ember.js" title="GitHub">
        <i class="icon-github"></i>
      </a>
      <a href="https://plus.google.com/communities/106387049790387471205" title="Google+">
        <i class="icon-gplus"></i>
      </a>
    </div>
  </div>
</div>


        <script type="text/javascript" src="/javascripts/api-969065a7.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
