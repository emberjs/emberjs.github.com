<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ember.js - Guides</title>
    <link rel="shortcut icon" href="/images/favicon.png" />
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.bxSlider.min.js"></script>

    <script type="text/javascript">
      $(function() {
        $('#logo').on('click', function(evt) {
          if (evt.shiftKey) {
            $('#content-wrapper').toggleClass('grid');
            return false;
          }
        });

        var backToTop = $('#back-to-top');
        var doc = $(document);
        var offset = backToTop.offset();
        var marginTop = 90;
        var showing = false;

        if (backToTop.length) {
          backToTop.on('click', function(evt) {
            $('html,body').animate({scrollTop: 0}, 200);
            return false;
          });

          doc.on('scroll', function() {
            if (!showing && doc.scrollTop() > offset.top+200) {
              showing = true;
              backToTop.css({
                opacity: 1,
                position: 'fixed',
                top: 20,
                left: offset.left
              });
            } else if (showing && doc.scrollTop() <= offset.top+200) {
              showing = false;
              backToTop.css({
                opacity: 0
              });
            }
          });
        }

        $('.bx-wrapper, .bx-window').width(940);
      });
    </script>

    
  </head>

  <body class="guides guides_router_primer guides_router_primer_index">
    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li><a href="/about">about</a></li>
          <li><a href="/documentation">docs</a></li>
          <li class="active"><a href="/guides">guides</a></li>
          <li><a href="/api">api</a></li>
          <li><a href="/community">community</a></li>
          <li><a href="/blog">blog</a></li>
        </ul>
        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><img src="/images/fork-us.png">Fork Us!</a>
        </div>
      </div>
    </div>

    <div id="content-wrapper">
      
      
        <div id="sidebar">
            <ol><li class="level-1"><a href="#toc_building-applications-with-ember-js">Building Applications with Ember.js</a></li><li class="level-2"><a href="#toc_introduction">Introduction</a></li><li class="level-2"><a href="#toc_definitions">Definitions</a></li><li class="level-3"><a href="#toc_navigation">Navigation</a></li><li class="level-3"><a href="#toc_state">State</a></li><li class="level-3"><a href="#toc_state-manager">State Manager</a></li><li class="level-3"><a href="#toc_router">Router</a></li><li class="level-3"><a href="#toc_route">Route</a></li><li class="level-3"><a href="#toc_routepath">RoutePath</a></li><li class="level-3"><a href="#toc_routing">Routing</a></li><li class="level-3"><a href="#toc_routable-url">Routable URL</a></li><li class="level-3"><a href="#toc_nesting">Nesting</a></li><li class="level-2"><a href="#toc_intersection-of-navigation-urls-routes-and-states">Intersection of Navigation URLs, Routes, and States</a></li><li class="level-2"><a href="#toc_summation-of-definitions-interplay-and-looking-ahead">Summation of Definitions' Interplay and Looking Ahead</a></li><li class="level-2"><a href="#toc_practical-application">Practical Application</a></li><li class="level-3"><a href="#toc_instructional-method">Instructional Method</a></li><li class="level-3"><a href="#toc_step-one-minimum-non-viable-router">Step One: Minimum Non-Viable Router</a></li><li class="level-3"><a href="#toc_step-two-minimum-non-viable-router-part-ii">Step Two: Minimum Non-Viable Router Part II</a></li><li class="level-3"><a href="#toc_step-three-minimum-viable-router">Step Three: Minimum Viable Router</a></li><li class="level-2"><a href="#toc_step-four-application-construction-in-ember">Step Four:  Application Construction in Ember</a></li><li class="level-3"><a href="#toc_views">Views</a></li><li class="level-3"><a href="#toc_applicationview-is-special">ApplicationView is Special</a></li><li class="level-3"><a href="#toc_the-default-context-for-a-view-is-its-controller">The Default Context For a View Is Its Controller</a></li><li class="level-3"><a href="#toc_views-are-tightly-coupled-to-their-controllers">Views Are Tightly Coupled To Their Controllers</a></li><li class="level-3"><a href="#toc_router-controlled-views-and-their-controllers-are-instantiated-in-ember-application-initialize">Router-Controlled Views and their Controllers Are Instantiated in Ember.Application#initialize()</a></li><li class="level-3"><a href="#toc_step-four-add-more-routes">Step Four:  Add More Routes</a></li><li class="level-3"><a href="#toc_step-five-programmatically-affecting-state-change">Step Five:  Programmatically Affecting State Change</a></li><li class="level-3"><a href="#toc_step-six-adding-the-route-property">Step Six:  Adding the route property</a></li><li class="level-3"><a href="#toc_step-seven-wiring-up-views-in-routes-the-outlet">Step Seven:  Wiring Up Views in Routes: The {{outlet}}</a></li><li class="level-3"><a href="#toc_moving-from-route-to-route">Moving from Route to Route</a></li><li class="level-2"><a href="#toc_fetching-data">Fetching Data</a></li><li class="level-2"><a href="#toc_from-a-list-of-shoes-to-a-shoe">From a List of Shoes to a Shoe</a></li><li class="level-3"><a href="#toc_add-action-signaling">Add Action Signaling</a></li><li class="level-3"><a href="#toc_add-a-trigger">Add a trigger</a></li><li class="level-3"><a href="#toc_implement-serialize-and-deserialize">Implement serialize and deserialize</a></li><li class="level-2"><a href="#toc_conclusion">Conclusion</a></li><li class="level-2"><a href="#toc_footnotes">Footnotes</a></li><li class="level-2"><a href="#toc_acknowledgments">Acknowledgments</a></li></ol>

          <div id="back-to-top"><a href="#">&#11014; Back to Top</a></div>
        </div>
      
      <div id="content" class="has-sidebar">
        
<article class="guide">
  <h1 id='toc_building-applications-with-ember-js'>Building Applications with Ember.js</h1><h2 id='toc_introduction'>Introduction</h2>
<!--- {{{1 -->

<p>Using the <a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js" title="Ember.Router Source Code">Ember.Router</a> is the preferred pattern for building large
applications in <a href="http://emberjs.com/" title="Ember.JS Homepage">Ember.JS</a>.  Ember&#39;s approach is to conceive
of your application as a collection of states which can be accessed via
both unique internal specifiers (a &quot;route path&quot;) <em>as well as</em> by URL locations
that &quot;route&quot; to those states.</p>

<p>This approach has many advantages.  Perhaps the most important advantage is
that by employing the <a href="http://en.wikipedia.org/wiki/Finite-state_machine" title="Wikipedia definition of a State Machine">State Machine</a> pattern, your application
remains easy to understand, expand, and debug.</p>

<p>This guide is designed to help the reader accomplish the following:</p>

<ul>
<li>Understand key terminology</li>
<li>Set up an <a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js" title="Ember.Router Source Code">Ember.Router</a> in a series of small,
incremental improvements upon a minimal, viable application</li>
</ul>

<!--- }}}1 -->
<h2 id='toc_definitions'>Definitions</h2>
<!--- {{{1 -->

<p>To prevent confusion, this guide will define the following key terms.</p>
<h3 id='toc_navigation'>Navigation</h3>
<p>Navigation is (1) the act of following a link whose <code>href</code> attribute
corresponds to a URL or (2) entering a URL into some sort of HTTP
processing application.  Navigation occurs when:</p>

<ul>
<li>Lauren types <code>http://emberjs.com</code> into her browser</li>
<li>Erik writes a Ruby script that accesses an application&#39;s RESTful
API at <code>http://example.com/api/widgets/list</code></li>
</ul>
<h3 id='toc_state'>State</h3>
<p>A <em>State</em> is a deterministic configuration of the application.  It can be
imagined as a set of variables, a set of rendered views, a set of instantiated
objects, etc.  <code>State</code>s are collected into <a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js" title="Ember StateManager">StateManager</a>s.</p>
<h3 id='toc_state-manager'>State Manager</h3>
<p>A container that holds an arbitrary number of unique states.</p>
<h3 id='toc_router'>Router</h3>
<p>While Ember supports having many <code>StateManagers</code> that address a wide variety
of purposes (handling what&#39;s in a status console, toggling lightbox effects,
etc.), a StateManager dedicated to bringing about certain application states is
a Router.  Fittingly, in the Ember source, a <code>Router</code> is a subclass of
<code>StateManager</code>.</p>
<h3 id='toc_route'>Route</h3>
<p>Just as a <code>Router</code> is a special case of a <code>StateManager</code>, a <code>Router</code>&#39;s
consitituent <code>State</code>s are given the special designation of <code>Route</code>.</p>
<h3 id='toc_routepath'>RoutePath</h3>
<p>A <code>Route</code> is referred to by a unique specifier called a routePath.  Ember
<em>routePaths</em>  look like <code>root.index</code> or <code>posts.post.comment</code>.</p>
<h3 id='toc_routing'>Routing</h3>
<p>Routing is the act of mapping a URL onto a routePath.  Thus a correspondence
between URL and State emerges: <code>http://example.com/#/posts</code> would (sensibly)
map to <code>posts.index</code>.</p>
<h3 id='toc_routable-url'>Routable URL</h3>
<p>A routable URL is a URL that triggers a transition to a Route.  In Ember, by
default, this looks like <code>http://example.com/#/posts</code>,
<code>http://localhost:4567/#/cars</code>, <code>http://localhost:4567/#/post/show/1</code>.  </p>

<p>The relevant part of the url is the part that is featured after the <code>#/</code>.  In
the descriptions above, the Routable URLs will trigger the <code>Router</code> to change
state to either <code>posts</code>, <code>cars</code>, or <code>post.show</code>.  If the use of this
&quot;hash-slash&quot; delimiter is not desirable, it can easily be
changed<sup><a href="#location-manager">1</a></sup>.</p>
<h3 id='toc_nesting'>Nesting</h3>
<p>As mentioned previously, Routes can be nested.  When a route has sub-routes it
is called the <em>parent</em> route and its sub-routes are called <em>child</em> routes and /
or <em>leaf</em> routes.</p>

<p><strong>Parent routes are not-routable</strong>.  Their children bear the responsibility of
constructing the state.  Otherwise said, all routable states <strong>must be</strong> leaf
routes.  A typical RoutePath for a nested route would be <code>post.show</code> and its
matching URL would be <code>#/post/show/1</code>.</p>

<!--- }}}1 -->
<h2 id='toc_intersection-of-navigation-urls-routes-and-states'>Intersection of Navigation URLs, Routes, and States</h2>
<p>Given that there is a correspondence between navigational endpoints (URLs),
their routePaths, and those routes&#39; &quot;states,&quot; it is obvious that an Ember
application that uses the <code>Router</code> is a <a href="http://en.wikipedia.org/wiki/Finite-state_machine" title="Wikipedia definition of a State Machine">State Machine</a> that uses
routePaths and / or URLs to change into the states.</p>
<h2 id='toc_summation-of-definitions-interplay-and-looking-ahead'>Summation of Definitions&#39; Interplay and Looking Ahead</h2>
<!--- {{{1 -->

<p>Given the preceeding definitions, we should be able to imagine an Ember
application that uses the <code>Router</code>.  While the exact how-to will come next, if we
wanted to talk about shoes and cars, we would imagine an application that does
something when handed URLs like:</p>

<ul>
<li>http://example.com/app/#/shoes</li>
<li>http://example.com/app/#/shoe/blue-suede</li>
<li>http://example.com/app/#/cars</li>
</ul>

<p>Given the association between a routable URL to a routePath thence to a
Route, it is logical to expect that we will build a Route that looks, as
a naive implementation, like:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
</pre></td>
  <td class="code"><pre>carsRoute: {
 route: '/cars'
}</pre></td>
</tr></table>
</div>
<p>We also know that <code>Route</code>s are aggregated into a <code>Router</code>.  The only piece
missing, therefore, is something that translates the routable URL and then
loads up the applicate state associated with the routable URL&#39;s <code>Route</code>.  This
process of turning a string representation of application state is known as
&quot;deserializing.&quot;  The reverse, representing the state of the application as a
string, which happens to be a URL that can conveniently be shared or
bookmarked, is known as &quot;serializing.&quot;  As has been said elsewhere, &quot;URLs are just a useful side effect of state change(<a href="http://trek.github.com"><em>Source</em></a>&quot;</p>

<p>The <code>Router</code> is both the collection of <code>Route</code>s, but also bears the
responsibility of creating the necessary Model, Controller, View and instances
required to support a given set of functionality in a Route.</p>

<p>In the subsequent sections, therefore, this guide will demonstrate how to
construct a Router, an abstraction that:</p>

<ul>
<li>Defines a collection of <code>State</code>s, i.e. <code>Route</code>s</li>
<li>Puts the browser into those states based on the routable URL</li>
<li>Delegates model, controller, and view construction to its contained routes</li>
</ul>

<p>With this general groundwork in place, we shall now undertake a series of
exercises that will create a basic routable application.</p>

<!--- }}}1 -->
<h2 id='toc_practical-application'>Practical Application</h2><h3 id='toc_instructional-method'>Instructional Method</h3>
<!-- {{{1 -->
<h4 id='toc_text'>Text</h4>
<!-- {{{2 -->

<p>This guide attempts to allow the reader to follow the incremental building-up
of a router-driven application.  You should be able to follow along on your
tablet on the train and, with some focus, follow along.  As such the code is
<em>frequently</em> re-listed.</p>

<!-- }}}2 -->
<h4 id='toc_hands-on-code'>Hands-on Code</h4>
<!-- {{{2 -->

<p>If you are in a situation where you have access to a computer, this guide also
has references to a <a href="http://github.com">GitHub</a> project,
<a href="https://github.com/sgharms/Ember-Router-Application-Guide-Code">Ember-Router-Application-Guide-Code</a>, whose commits match each of these
incremental steps.  As such, you can clone the repository, check out the commit
under discussion, adjust the code, try things out, and then move to the next
step.  Simply clone the project, follow its <code>README.md</code> you will have, in the
<code>workspace</code> subdirectory, the code that I demonstrate in the text listings.</p>

<p>In each of the text listings I will include GitHub URLs that show the diffs in
the code so that each step is easily digested.  GitHub links are noted by links
with the text content:  <em>Diff View</em>.</p>

<p>The code is housed in a minimal application framework built on Ruby and Sinatra
called <a href="https://github.com/sgharms/halbert">Halbert</a>.  If the terms &quot;git,&quot;
&quot;Sinatra,&quot; and &quot;Ruby&quot; are all confusing to you, feel free to merely follow
along with the text and / or copy-and-paste the code listings into your
development environment.</p>

<!-- }}}2 -->

<!-- }}}1 -->
<h3 id='toc_step-one-minimum-non-viable-router'>Step One: Minimum Non-Viable Router</h3>
<!--- {{{1 -->

<p><a href="https://github.com/sgharms/Halbert/commit/c7f2f79f8a5b4f946ab6dc40850c0b7810ee5ef8"><em>Diff View</em></a></p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<p>This step:</p>

<ol>
<li> <strong>Establishes an Ember application</strong>:  <code>window.App = Ember.Application.create</code> creates an Ember.Application called <code>App</code>.  Creating this App object:

<ol>
<li> Provides a single location for all objects associated with this application so as to <a href="https://www.google.com/search?q=don&#x27;t+pollute+the+global+namespace">avoid polluting the global namespace</a> (<a href="http://trek.github.com"><em>Source</em></a>)</li>
<li> Creates a single listener for each user event (e.g. &#39;click&#39;) and <a href="https://www.google.com/search?q=event+delegation">controls event delegation</a> (<a href="http://trek.github.com"><em>Source</em></a>)</li>
</ol></li>
<li> <strong>Provides some diagnostic logging</strong>:  Taking from the jQuery playbook, when the document is ready, the logger message fires</li>
<li> <strong>Declares our <code>Router</code> class</strong>:  A property called <code>Router</code> is declared on <code>App</code>.  It is an instance of <code>Ember.Router</code> and will be the main area of changes in this guide</li>
</ol>

<p>Refresh your browser that&#39;s viewing this code and you will receive the following error in your console:</p>

<p><img src="/images/routing-primer/app-without-root-route.png"></p>

<p>An error appears:   <code>Uncaught Error: assertion failed: Failed to transition to
initial state &quot;root&quot;</code>.</p>

<p>As a legacy of Ember&#39;s history and inheritance chain, <code>State</code> is a synonym for
<code>Route</code> (see discussion above).  As such, the error message can be read as
saying that the application could not find an <code>Ember.Route</code> called <code>root</code>.  The
Router class of of an Ember application <strong>must</strong> contain an Ember.Route called
<code>root</code>.  Let&#39;s add it.</p>

<p>The amended code will look like the following:</p>

<p><a href="https://github.com/sgharms/Halbert/commit/369f7ce14c72dd9f552e890642ea63b742dade72"><em>Diff View</em></a></p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">root</span>:  Ember.Route.extend({
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<p>Refresh the browser.</p>

<!--- }}}1 -->
<h3 id='toc_step-two-minimum-non-viable-router-part-ii'>Step Two: Minimum Non-Viable Router Part II</h3>
<!--- {{{1 -->

<p>Running the previous code <em>again</em> produces an error:  <code>Uncaught Error:
assertion failed: ApplicationView and ApplicationController must be defined on
your application</code> <em>but also</em> shows signs of improvement: we see the
<code>console.log</code> message.</p>

<p><img src="/images/routing-primer/no-app-controller-defined.png"></p>

<p>An <code>Ember.Application</code> using the <code>Router</code> <strong>must</strong> define <strong>both</strong>
<code>ApplicationController</code> and <code>ApplicationView</code>.  Why this is so will be made
clear multiple times throughout this guide.</p>

<p>These definitions are simple:</p>

<p><a href="https://github.com/sgharms/Halbert/commit/0dfbb4b1fadb29e95967b98be9ca13778843fa3d"><em>Diff View</em></a></p>
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
</pre></td>
  <td class="code"><pre>ApplicationView: Ember.View.extend(),
<span class="key">ApplicationController</span>: Ember.Controller.extend(),</pre></td>
</tr></table>
</div>
<p>Place these two declarations on the <code>App</code> object and refresh.</p>

<!--- }}}1 -->
<h3 id='toc_step-three-minimum-viable-router'>Step Three: Minimum Viable Router</h3>
<!--- {{{1 -->

<p>Ember no longer complains about missing critical data, <strong>but</strong> there are some
important modifications that should be made to move from &quot;doesn&#39;t throw
exceptions&quot; to a solid baseline.</p>
<h4 id='toc_add-an-index-property'>Add an &#39;index&#39; property</h4>
<!--- {{{2 -->

<p>While a <code>Route</code> called <code>root</code> is the only thing <strong>required</strong> to boot up a
<code>Router</code> based application, that <code>Route</code> should be a &quot;meta-Route,&quot; a Route that
holds Routes.  By convention the Route that <code>root</code> holds, that corresponds to
the base state of the application, should be called <code>index.</code> <strong>The root Route
cannot be made routable.</strong>  </p>

<p><a href="https://github.com/sgharms/Halbert/commit/290ff2c636b6dc4218301967b020f1e48e9cf221"><em>Diff View</em></a></p>

<!--- {{{3 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
    <span class="key">ApplicationView</span>: Ember.View.extend(),
    <span class="key">ApplicationController</span>: Ember.Controller.extend(),
    <span class="key">Router</span>: Ember.Router.extend({
      <span class="key">root</span>:  Ember.Route.extend({
        <span class="key">index</span>:  Ember.Route.extend({
          <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
        })
      })
    })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}3 -->

<!--- }}}2 -->
<h4 id='toc_add-a-template-to-the-applicationview'>Add a template to the ApplicationView</h4>
<!--- {{{2 -->

<p><a href="https://github.com/sgharms/Halbert/commit/935bb45542da2c2143d5e45b5eec10a7c3d3b361"><em>Diff View</em></a></p>

<p>So that we start to see some visual feedback besides <code>console.log</code> messages, a
template property should be added to the <code>ApplicationView</code> class.</p>

<!--- {{{3 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
    <span class="key">ApplicationView</span>: Ember.View.extend({
      <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>
    }),
    <span class="key">ApplicationController</span>: Ember.Controller.extend(),
    <span class="key">Router</span>: Ember.Router.extend({
      <span class="key">root</span>:  Ember.Route.extend({
        <span class="key">index</span>:  Ember.Route.extend({
          <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
        })
      })
    })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}3 -->

<p>This requires the addition of a template called &#39;application&#39;:</p>

<!--- {{{3 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;h1&gt;</span>Hi Ember<span class="tag">&lt;/h1&gt;</span></span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!--- }}}3 -->

<!--- }}}2 -->
<h4 id='toc_logging-and-debugging'>Logging and Debugging</h4>
<!--- {{{2 -->

<p>Every <code>Ember.Route</code> fires an <code>enter</code> and <code>exit</code> callback.  Here is a suitable
place to insert logging and debugging data as has already appeared in this
application.</p>

<p>Setting the <code>enableLogging</code> property to <code>true</code> within the Router also helpfully
display&#39;s the Router&#39;s decision-making process.  When the browser&#39;s debug
console is open, the router will print helpful error messages beginning with
<code>STATEMANAGER</code>.</p>

<p><a href="https://github.com/sgharms/Halbert/commit/431b22657496f9c2775281e023ff864c3cf2ea94"><em>Diff View</em></a></p>

<p>Lastly, as a point of formatting, Ember makes <em>liberal</em> use of vertical whitespace.  Just as vertical whitespace helps
separate logical &quot;paragraphs&quot; of operations in code, so too is it appropriate
to use vertical whitespace to create logical groupings of controllers and
views.  </p>

<!-- }}}2 -->

<p>An initial load of this application looks like the following:</p>

<figure>
  <img src="/images/routing-primer/initial-load-router.png">
</figure>

<!--- }}}2 -->

<!--- }}}1 -->
<h2 id='toc_step-four-application-construction-in-ember'>Step Four:  Application Construction in Ember</h2>
<!--- {{{1 -->

<p>At this point one <em>technically</em> has a functioning Router-based application.  The next steps hinge less on the Router, and more on Ember&#39;s approach to application construction.  These approaches become manifested in the Router&#39;s syntax as more advanced applications are built.</p>
<h3 id='toc_views'>Views</h3>
<!--- {{{2 -->

<p>Views in Ember are responsible for:</p>

<ul>
<li>Determining the structure of a section of the application&#39;s rendered HTML, e.g. &quot;this view should be of class person-name&quot;</li>
<li>Responding to delegated user events, e.g. &quot;fade-in on mouseOver&quot;</li>
</ul>

<p>All views have a rendering context.  Inside of a View&#39;s template file, usage of <code>{{property}}</code> is evaluated against that context.  It is <strong>not</strong> the case that the view holds the context.  </p>

<!--- }}}2 -->
<h3 id='toc_applicationview-is-special'>ApplicationView is Special</h3>
<!--- {{{2 -->

<p>This view is the root view of all other views.  All other views will be
injected into it via a template concept called an <code>{{outlet}}</code> which will be
discussed later.  This is why, as demonstrated earlier, Ember considers it a
raise-worthy problem when it does not find the <code>ApplicationView</code> (or its partner,
<code>ApplicationController</code>).</p>

<!--- }}}2 -->
<h3 id='toc_the-default-context-for-a-view-is-its-controller'>The Default Context For a View Is Its Controller</h3>
<!--- {{{2 -->

<p>Given the preceeding discussion, it stands to reason that the default context
for ApplicationView would be ApplicationController.  As such, a value set in
ApplicationController, when referenced by handlebars inside of the
ApplicationView&#39;s template, should render to the screen.</p>

<p>In the following code listing the view renders content from its context <em>as
well as</em> uses the context to determine whether a class should be applied to the
view.  </p>

<p>Make the following adjustments to your code.</p>

<p><a href="https://github.com/sgharms/Halbert/commit/333059d11fda775794242b93091d34ed5ae461b5"><em>Diff View</em></a></p>

<!--- {{{3 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}3 -->

<!--- {{{3 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;h1&gt;</span>Hi Ember<span class="tag">&lt;/h1&gt;</span>
  &lt;p </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="error">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!--- }}}3 -->

<p>The result is the following:</p>

<figure>
  <img src="/images/routing-primer/contexts-and-content.png">
</figure>

<p>Information is shared between the ApplicationView and the ApplicationController
The View stays focused on presentation while the Controller stays focused on
domain logic.  By setting <code>classNames</code> on the View we affect the CSS classes applied to the <code>Ember.View</code>.  By using <code>bindAttr</code> we tell the template to apply the class <code>is-slogan</code> if the context&#39;s evaluation of <code>isSlogan</code> returns <code>true</code>.</p>

<!--- }}}2 -->
<h3 id='toc_views-are-tightly-coupled-to-their-controllers'>Views Are Tightly Coupled To Their Controllers</h3>
<!--- {{{2 -->

<p>Given the preceeding discussion, an opinion of Ember&#39;s designers, that is
enforced by the router is that for a given <code>BaseName</code> (e.g. &quot;Application,&quot;
&quot;CustomerEntry,&quot; &quot;My Items&quot;) there should be a BaseNameView and a
BaseNameController.  The base name &quot;Application&quot; is no different.  In this
respect.  Remember: Views hold UI behavior, their partner controllers hold
information about UI.</p>

<!--- }}}2 -->
<h3 id='toc_router-controlled-views-and-their-controllers-are-instantiated-in-ember-application-initialize'>Router-Controlled Views and their Controllers Are Instantiated in Ember.Application#initialize()</h3>
<!--- {{{2 -->

<p>In the code listings thus far, a call to <code>App.initialize()</code> has always been the
last line of code.  The function of this call is multiple:</p>

<ol>
<li> It runs <code>.create()</code> on the <code>Router</code> instance and saves it as <code>App.router</code>.</li>
<li> It iterates through the controller and view namespaces and, for each class found, it executes .create() on the class and sets that instance as a property on <code>App.router</code></li>
<li>Each <code>create</code>d view is given a <code>controller</code> property that corresponds to its controller (thus setting up the context to be helpful by default so that templates look in the right place for data).</li>
</ol>

<p>Again, thanks to the requirement that <code>ApplicationController</code> and
<code>ApplicationView</code> and the #initialize() method, developers are assured that
there is a primoridal view managed by a sensibly-named controller, onto which
other views can be plugged in.  Specifically the ApplicationView and
ApplicationController, post-initialize, are set to <code>App.router.applicationView</code>
and <code>App.router.applicationController</code>.  </p>

<!--- }}}2 -->

<!--- }}}1 -->
<h3 id='toc_step-four-add-more-routes'>Step Four:  Add More Routes</h3>
<!--- {{{1 -->

<p>Let us now expand on the application we&#39;ve built so far.  We know how to build
a minimum viable application, how to define routes, and how to implement
debugging-grade instrumentation.  In the next listing, the <code>root.index</code>
routePath will be joined by two other routes: <code>root.shoes</code> and <code>root.cars</code>.</p>

<p><a href="https://github.com/sgharms/Halbert/commit/e4b2b9922193d9b6bd821f0dba253395c0db9485"><em>Diff View</em></a></p>

<!--- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<p>It&#39;s worth noting here that the initial routes were added <strong>within</strong> the
declaration of the root route.   <strong>Remember:</strong>  all routes must be held within
the <code>root</code> Route.</p>

<p>With a refresh of this page you should see the same layout, but now there are
views wherewith to experiment.   The first means for moving state is by direct
programmatic invocation from the console.</p>

<!--- }}}1 -->
<h3 id='toc_step-five-programmatically-affecting-state-change'>Step Five:  Programmatically Affecting State Change</h3>
<!--- {{{1 -->

<p>Routes can be transitioned into programmatically by invoking
<code>Ember.Router#transitionTo(&#39;stateName&#39;)</code>.  The <code>Router</code> instance in the
currently running application can be accessed by entering: <code>App.get(&#39;router&#39;)</code>
in the console.  It is also helpful to issue
<code>App.get(&#39;router.currentState.name&#39;)</code> or <code>App.get(&#39;router.currentPath&#39;)</code> 
when you want to find out what the current, active <code>Route</code> is.</p>

<p>Per the code listing, Routes named <code>cars</code> and <code>shoes</code> were added.  To change to
the <code>cars</code> route, issue <code>App.get(&#39;router&#39;).transitionTo(&#39;cars&#39;)</code>.  Notice that
The <a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js" title="Ember StateManager">State Manager</a> logging output states that the <code>cars
sub-state was entered</code>.  The console provides further tools wherewith to
ascertain the state of the router as shown in the image.</p>

<p><img src="/images/routing-primer/change-states-noroute-defined.png"></p>

<p>The listing also shows that something important <strong>did not</strong> happen, the URL did
not change in a way that is relevant to the states.  Thanks to the
<code>window.location.href</code> it&#39;s clear to see that the URL slug did not change.
This did not happen because the <code>cars</code> and <code>shoes</code> <code>Route</code>s both <strong>lack</strong> the
<code>route</code> property.  Making the tiny changes in the next section will fix this
problem.</p>

<!-- }}}1 -->
<h3 id='toc_step-six-adding-the-route-property'>Step Six:  Adding the route property</h3>
<!-- {{{1 -->

<p><a href="https://github.com/sgharms/Halbert/commit/2b84962891eff4dba4a4f2e1afbe99840fdbb17b"><em>Diff View</em></a></p>

<p>This is a simple code change:</p>

<!-- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<p>Now, when the <code>transitionTo</code> method is used, the application&#39;s state is
&quot;<em>serialized</em>&quot; into the URL slug.  Similarly, if we navigate to
<code>http://server/#/cars</code> the cars state is &quot;<em>deserialized</em>.&quot;  While these URLs
map neatly to a defined <code>Route</code> name, URLs can feature dynamic segments or
nested segments as well.  The <code>Route</code> can define how to handle the serialize /
deserialize processes by defining <code>serialize()</code> and <code>deserialize()</code> methods on
the <code>Route</code>.  Advanced (de)serialization will be covered later in this guide.</p>

<!-- }}}1 -->

<p>We can likewise change to the other state with:
<code>App.router.transitionTo(&#39;root.shoes&#39;)</code>.  As expected, we enter that Route
state and see a change in the URL slug to <code>#/shoes</code>.</p>

<p>It is worth noting that when transferring between sibling states (<code>cars</code> to
<code>shoes</code>) the parent state was <em>not</em> entered.  This is confirmed both by the
state manager&#39;s debugging  output as well as by the non-execution of the
<code>root.index</code>&#39;s <code>enter()</code> callback.  The following image demonstrates the
flexibility the router affords users.</p>

<figure>
  <img src="/images/routing-primer/move-between-routes-transitionto-urlslug.png">
</figure>

<p>With Routes with URLs in place, we can now work to make the views behave as
side-effects of the application state.</p>

<!--- }}}1 -->
<h3 id='toc_step-seven-wiring-up-views-in-routes-the-outlet'>Step Seven:  Wiring Up Views in Routes: The {{outlet}}</h3>
<!--- {{{1 -->

<p>Above we mentioned that the primordial view is the <code>ApplicationView</code>.  We can
imagine that its associated template would likely have some skeletal, static
HTML in it:  a logo, a static footer, and some other assets.</p>

<p>But there are also going to be components whose structural position always
remains the same, but whose content changes.  We could imagine that a &quot;top
navigation&quot; area (or &quot;View&quot;) will always happen in the same place, but whose
data source might contain different content when loaded (e.g. &quot;logged-in
navigation&quot; or &quot;admin navigation&quot;);</p>

<p>The place where this appropriate-to-the-State View &quot;plugs in&quot; is an &quot;<code>outlet</code>.&quot;
While &quot;outlet&quot; has many subtle meanings in English, in Ember case it means &quot;the
place where Views get plugged in.&quot;</p>

<p>We denote an outlet by putting the Em.Handlebars helper <code>{{outlet}}</code> inside of
our Views&#39; template code.  A template can have multiple outlets which are
differentiated by name (e.g. <code>{{outlet topNav }}</code> and <code>{{outlet leftNav}}</code>).
In many templates, however, there will be only one <code>{{outlet}}</code>.</p>

<p>In the following listing we add templates for the newest routes.  For each
Ember requires <em>basename</em>View, <em>basename</em>Controller, and a template for each
view.  This is a technique that has been demonstrated previously in this guide.
What is new will be the <em>linking</em> of these new views into the existant
<code>ApplicationView</code>&#39;s <code>{{outlet}}</code>.  Discussion of the &quot;linking&quot; method,
<code>connectOutlets</code> occurs after the code listings.</p>

<p>This is one of the most important steps in the guide.  While simple, it is
important and the diff view is very helpful.  </p>

<p><a href="https://github.com/sgharms/Halbert/commit/193c431005107714fbda96ee453f9030364e9225"><em>Diff
View</em></a></p>

<!--- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<p>And the templates:</p>

<!--- {{{2 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;h1&gt;</span>Hi Ember<span class="tag">&lt;/h1&gt;</span>
  &lt;p </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="error">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<p>The application should look like this:</p>

<p><img src="/images/routing-primer/initial-view-wireup.png"></p>

<p>The main change in this commit is the addition of the <code>{{outlet}}</code> in
ApplicationView and the addition of <code>connectOutlets</code> in the <code>cars</code> route.
Adding <code>{{outlet}}</code> to the template tells Ember: &quot;This is a point that I want
to insert a view.&quot;  </p>

<p>Recall that <code>outlets</code> <em>can</em> be named but, frequently, they are not.  When views
are extremely well decomposed, it is likely that one will attach a view A to
ApplicationView, some sub-view to A called &quot;B&quot;, some sub views &quot;B-prime&quot; and
&quot;B-double-prime to B&quot;, etc.</p>

<p>It is into the <code>outlet</code> defined in the template that we wish to &quot;connect&quot; a
view appropriate for the <code>cars</code> route.  One does so in a method called,
fittingly, <code>connectOutlets</code>.  This method is provided as a mixed-in method from
the Routable mixin.  While not heretofore explicitly stated, in terms of class
structure, the Router is a <code>StateManager</code> &plus; <code>Routable</code>.</p>

<p>Let&#39;s first look at the signature of <code>connectOutlets</code>:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>
</pre></td>
  <td class="code"><pre>connectOutlets:  function(router, context){...}</pre></td>
</tr></table>
</div>
<p><code>connectOutlets</code> is always passed one argument by default: the router itself
&ndash; the selfsame router in which the method is defined!  When inside
<code>connectOutlets</code>, if one neds to access other controllers, one should use the
<code>router.get(&#39;someController&#39;)</code> pattern.  Ember lazily loads many of its
components during its bootstrap process.  While
<code>App.get(&#39;router.fooController&#39;)</code> and <code>router.get(&#39;fooController&#39;)</code> point to
the same thing eventually, the latter is to be preferred within the router.</p>

<p>The <code>context</code> parameter contains any data <code>return</code>ed from the <code>deserialize</code>
method. During a deserialization process the resultant data structure may need
to be passed (and displayed) by one of the views connected in connectOutlets.
This parameter is a placeholder for that data.  While not a concern in the
current iteration of the app, it will be demonstrated later.</p>

<p>Let&#39;s flesh out our connectOutlets method some more:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
</pre></td>
  <td class="code"><pre>connectOutlets:  function(router, context){
    router.get('applicationController').connectOutlet('cars');
}</pre></td>
</tr></table>
</div>
<blockquote>
<p>&quot;Router, find me the instance of your class <code>App.ApplicationController</code> called
<code>App.applicationController</code> which, by convention is associated with the view
<code>App.ApplicationView</code> called <code>App.applicationView</code> whose template declaration
defines an outlet. I wish to take an instance of <code>App.CarsView</code> and inject its
template data into the outlet.&quot;</p>
</blockquote>

<p>The amount of work done for so little typing is quite staggering! Clearly some
convention-over-configuration inference is being made during this invocation.
In its single-argument invocation uses this single string to derive:</p>

<ul>
<li>A view source</li>
<li>A controller</li>
<li>Ember will assume the view with the outlet will have only one <code>{{outlet}}</code> call </li>
<li>Ember will assume the view you&#39;re injecting will have the data it needs in its controller&#39;s <code>content</code> property</li>
</ul>

<p>Another common invocation is to pass three arguments defining:</p>

<ul>
<li>a named outlet: if both <code>{{outlet alpha}}</code> and <code>{{outlet beta}}</code> are
present, a string <code>&#39;beta&#39;</code> would tell Ember you want to inject onto the <code>beta</code>
outlet </li>
<li>a name whence is derived a viewSource and controller</li>
<li>a data object that will be assigned to the controller&#39;s <code>content</code> attribute </li>
</ul>

<p>An example is <code>.connectOutlet(&#39;topNav&#39;, &#39;statesList&#39;, context.us_states);</code></p>

<p>The most granular, and most declarative version is to pass a single configuration
Plain Old Javascript Object (POJO) with explicit parameters.  The specifics can be 
viewed in <a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L102">connectOutlet API</a>.</p>

<p>To show the flexibility the Router affords via <code>connectOutlets</code>, the
application will now be built up using the techniques described in this
section.</p>

<p>As a brief aside, it might feel a bit bizarre to tell the <em>controller</em> to wire
up some other <code>baseName</code> to its view&#39;s <code>{{outlet}}</code> versus telling the view to
do this &quot;plugging in&quot; itself.  Ember&#39;s opinion is that the View should be,
despite its capability of being quite powerful, fairly limited (CSS class
calculation, event handling).  Therefore the <em>controller</em> should bear the
responsibility for performing the wiring.  As a code smell, if you find your
<code>Ember.View</code>s doing much more logic than pure view behavior, you might be
building in a fashion that&#39;s not entirely Ember-opinions compatible.</p>

<p>For those who have examined other Ember tutorials or developed some Ember app,
the question may have arisen:  &quot;Sometimes I define a simple view in my
templates, or I might want to wire up a simple <code>Ember.View</code> into an outlet, do
I <strong>have</strong> to create a matching <code>Ember.Controller</code> for it?&quot;  The answer is
&quot;no.&quot;  When an <code>Ember.View</code> is attached to an outlet and it <em>does</em> not have its
own <code>Controller</code> for defining its context, it inherits the context of its
parent template.  A real-life example would be imagine an item that could be
&quot;liked&quot; by clicking on a glyph.  Handling the CSS and click logic could live on
this <code>FavoriteView</code> which is rendered into an <code>{{outlet}}</code> held by <code>ItemView</code>&#39;s
template.  <code>ItemView</code>&#39;s domain data should not be passed into the sub-template
<code>FavoriteView</code> by some manner of weird argument-passing contortion.  Rather
<code>FavoriteView</code> can simply, and happily, and, most importantly, <em>sensibly</em> use
its parent view&#39;s context.<sup><a href="#view-preserves-context">2</a></sup></p>

<p><a href="https://github.com/sgharms/Halbert/commit/98e6f3ebc033937523ccd723e0d937a5d9465aca"><em>Diff
View</em></a></p>

<!-- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="key">ShoesView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoesController</span>:  Em.ArrayController.extend(),
  <span class="key">SalutationView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>
  }),
  <span class="key">SalutationController</span>:  Em.ObjectController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>, 
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Ember App</span><span class="delimiter">&quot;</span></span> });
        }
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>, 
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>);
        }
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>, 
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cars Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div><div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="tag">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">body</span><span class="inline-delimiter">}}</span></span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">footer</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Shoes<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://youtu.be/v_Yx0X-eHn8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>N<span class="entity">&amp;uuml;</span> Shooz?<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<p>Change your code to look like this and issue <code>App.router.transitionTo(&#39;shoes&#39;)</code>
or <code>App.router.transitionTo(&#39;cars&#39;)</code> to change state and see how the
application&#39;s appearance changes.  Or, try affixing the <code>#/cars</code> slug to change
the state.  Ember&#39;s <code>outlet</code> metaphor makes building complex, scalable
applications surprisingly easy.  No longer must you troll through endless
template code removing (or adding) conditional clauses.  Simply create a new
view / controller pair, unplug the old, and plug in the new.</p>

<p>The Router&#39;s design with <code>{{outlet}}</code>s opens many exciting new possibilities:
A/B testing, &quot;admin&quot; interfaces versus &quot;regular&quot; interfaces, portable layouts,
etc.</p>

<p>Now that we&#39;ve demonstrated how to wire up a substantial view quickly, we need
to provide a way, via the views, to affect Route state change, clearly using
<code>transitionTo</code> and typing in url slugs is not the way to go!  This is addressed
in the following section.</p>

<!--- }}}1 -->
<h3 id='toc_moving-from-route-to-route'>Moving from Route to Route</h3>
<!--- {{{1 -->

<p>Recall that we have already demonstrated that routes can be changed with calls
to <code>App.get(&#39;router&#39;).transitionTo(&#39;someState&#39;)</code>.  Ember also has the
capability of triggering this action as a result of a browser event: typically,
click.  This section will show how to change state as a result of an event.  </p>

<p>Looking at our application, let&#39;s transition from the <code>index</code> state to the
<code>cars</code> state.  We&#39;ll need the following inside of our <code>ApplicationView</code>&#39;s
template:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>
</pre></td>
  <td class="code"><pre>&lt;p&gt;&lt;a {{action goToCars href=true}}&gt;Go To Cars&lt;/a&gt;</pre></td>
</tr></table>
</div>
<p>And in the <code>Router</code> declaration:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>
</pre></td>
  <td class="code"><pre>goToCars:  Ember.Route.transitionTo('root.cars')</pre></td>
</tr></table>
</div>
<p>The <code>{{action}}</code> Handlebars helper is used throughout Ember&#39;s Handlebars
templates to handle eventing in Ember (click, keyDown, <a href="http://docs.emberjs.com/symbols/Ember.View.html"><strong>etc.</strong></a>).</p>

<p>In Router-driven applications, if an action is not intercepted by a view, that
event will bubble up to the Route in which that view was rendered.  If that
Route is a sub-route of another Route the transition will be sought there all
the way up to the top-level <code>Route</code> definition, our &uuml;ber-container: <code>root</code>. </p>

<p>This bubbling effect allows certain actions to remain private.  If certain
transitions should only be available for certain sub-sub-states, put the
transition on the sub-state and you&#39;ve achieved a type of scoping.</p>

<p>In this example, Ember looks to App.ApplicationView to handle the click, it
does not.  The event then bubbles upward until it hits the <code>root</code> <code>Route</code> where
a transition is indeed found.</p>

<p>It is often desirable to have the <code>{{action}}</code> fire on the event of something
that is not a hyperlink: an image, a sprite, etc.  In these cases the
<code>href=true</code> component of the action can be elided.  When you want users to
follow a link (i.e you have embedded the <code>{{action}}</code> in a link OR when you
want the place whither they go to be bookmark-able, add the <code>href=true</code>
directive.</p>

<p><code>Ember.Route.transitionTo(&#39;root.cars&#39;)</code> generates a function which does a
transition.  When Ember finds the proper transition it uses Javascript&#39;s
<code>call()</code> to invoke the function with the proper context.</p>

<p>Refresh the application and notice that by clicking on the &#39;Go To Cars&#39; link,
one now changes state to the &#39;cars&#39; view. Using this pattern basic app
traversal is now possible.</p>

<p><a href="https://github.com/sgharms/Halbert/commit/87152ba404759897a0144cdbc4905f53016fcfa2"><em>Diff View</em></a></p>

<!-- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="key">ShoesView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoesController</span>:  Em.ArrayController.extend(),
  <span class="key">SalutationView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>
  }),
  <span class="key">SalutationController</span>:  Em.ObjectController.extend(),
  <span class="key">TraversalView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>
  }),
  <span class="key">TraversalController</span>:  Em.ObjectController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">goToCars</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">root.cars</span><span class="delimiter">'</span></span>),
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Ember App</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>); }
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>);
        }
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cars Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<!-- {{{2 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="tag">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">body</span><span class="inline-delimiter">}}</span></span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">footer</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Shoes<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://youtu.be/v_Yx0X-eHn8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>N<span class="entity">&amp;uuml;</span> Shooz?<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">traversal</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;p&gt;&lt;a </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToCars</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="error">&gt;</span>Go To Cars<span class="tag">&lt;/a&gt;</span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<p>By similar means, other <code>{{action}}</code> handlers and templates can be created so
that the application can be navigated by clicking, as well as by changing URL,
as well as by using <code>transitionTo</code>.  As a self-check, try to formulate how you
would like to wire up these state-changes. A code listing follows but try it
out yourself!</p>

<p><a href="https://github.com/sgharms/Halbert/commit/b26d039f51c294555bb986e159c08d6d89144dcc"><em>Diff
View</em></a></p>

<!-- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="key">ShoesView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoesController</span>:  Em.ArrayController.extend(),
  <span class="key">SalutationView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>
  }),
  <span class="key">SalutationController</span>:  Em.ObjectController.extend(),
  <span class="key">TraversalView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>
  }),
  <span class="key">TraversalController</span>:  Em.ObjectController.extend(),
  <span class="key">HomeView</span>:  Em.View.extend({
    <span class="key">template</span>:  Em.Handlebars.compile(<span class="string"><span class="delimiter">'</span><span class="content">&lt;p&gt;&lt;a {{action goHome href=true}}&gt;&lt;em&gt;Go Home&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;</span><span class="delimiter">'</span></span>)
  }),
  <span class="key">HomeController</span>:  Em.ObjectController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">goToCars</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>),
    <span class="key">goToShoes</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>),
    <span class="key">goHome</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>),
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Ember App</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>); }
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
        }
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cars Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.initialize();</pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<!-- {{{2 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="tag">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">body</span><span class="inline-delimiter">}}</span></span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">footer</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Shoes<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://youtu.be/v_Yx0X-eHn8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>N<span class="entity">&amp;uuml;</span> Shooz?<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">traversal</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  &lt;p&gt;&lt;a </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToCars</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="error">&gt;</span>Go To Cars<span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToShoes</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="tag">&gt;</span>Go To Shoes<span class="tag">&lt;/a&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<p>At this point you should be grinning because you&#39;re probably starting to feel
comfortable with the Router and Ember and are realizing how much power it gives
you with so little typing!</p>

<!--}}}1-->
<h2 id='toc_fetching-data'>Fetching Data</h2>
<!--- {{{1 -->

<p>While the Router has, thus far, afforded this application many wonderful
features: discrete states, clarity of intention, a back button that works, etc.
a very big component is missing:  data.</p>

<p>Ember&#39;s opinion is that you should ask your Model classes how to retrieve
instances or collections of that model.  This should look <em>somewhat</em> similar to
those coming from Rails.  In the same way as one might express <code>Post.all</code> or
<code>Post.find(id)</code>, Ember perfers a similar method of declaration: the &quot;fetching&quot;
work should occur as a &quot;class method&quot; on an Ember model.</p>

<p>Class method, above, appears in quotes to note that we fully understand that no
such thing exists in the Javascript language per se.  Let&#39;s imagine a working
model for how data retrieval should work.   This process will be presented in a 
C-influenced style for reasons explained shortly:</p>

<ol>
<li> Construct an array of objects</li>
<li> Said array of objects can be &quot;pointed to&quot; by a reference.  For clarity
purposes this will be called <code>0x000016</code></li>
<li> Refer to the reference of objects by the variable name: <code>listOfShoes</code></li>
<li> Give the <code>ShoeView</code>&#39;s <code>connectOutlet</code> arguments of (anOutlet,
name, contextReference) where contextReference points to the reference of
our array of objects, that is to the object at address <code>0x000016</code>, also
known as <code>listOfShoes</code></li>
<li> Make this <code>listOfShoes</code> available by calling a method on a semantically
appropriate object</li>
</ol>

<p>To translate this model to be compatible with Ember&#39;s opinions, the <code>Router</code>
should be to call the method: <code>App.Shoe.all()</code> which returns a unique reference
address which, for the lifetime of the app, will be the source of data for the
<code>listOfShoesController</code> which will inform the <code>ShoesView</code>&#39;s controller partner,
<code>ShoesController</code>. Since the content of the <code>content</code> variable is to be an
array, it makes sense that <code>ShoesController</code> should be an extension of the
<code>Em.ArrayController</code> class.  </p>
<h4 id='toc_aside-sublcasses-of-ember-controller-ember-arraycontroller-and-objectcontroller'>Aside:  Sublcasses of Ember.Controller:  Ember.ArrayController and ObjectController</h4>
<p>If one examines the sample code thus far, one will note that both
<code>ShoesController</code> and <code>CarsController</code> are, and have been, of type <code>ArrayController</code>
since the very beginning of this guide.  For controllers that don&#39;t manage a
collection of array-like data there is <code>Ember.ObjectController</code> whose content
variable is, unsurprisingly, an <code>Object</code>.</p>

<p>The chief virtue of these <code>Ember.Controller</code> subclasses is that in the
templates of the associated views of these controllers, one may issue a
Handlebars directive like <code>{{#each shoe in controller}}</code> and the view and the
controller will automatically proxy the controller&#39;s <code>content</code> attribute as the
enumerable thing (or dereferencable thing, in the case of
<code>Ember.ObjectController)</code> to the view.</p>

<p>As an example, one can issue from the console:
<code>App.get(&#39;router.shoesController.length&#39;)</code>.  Clearly a <code>shoesController</code>
doesn&#39;t have a length, but since it is an Ember.ArrayController, the
<code>App.ShoesController</code> class proxies that call to the array that&#39;s resident on
the <code>content</code> property.</p>
<h4 id='toc_why-the-focus-on-references'>Why the Focus on References?</h4>
<p>In the discussion before the aside, much ado was made of this notion of
&quot;references&quot;. When Ember views are linked up via the router the content
properties of the controllers are set to watch a specific Ember object. Per
our previous example, say, the object at address 0x000016.  </p>

<p>If one were to replace ShoesController.content with another array (a different
array reference), the view, which would still be watching the old reference,
<strong>would not know to update itself</strong>. This is a very common error for those
learning to use the Router and to integrate it with model-held data methods.</p>

<p>As such when data updates come the content at the controller&#39;s <code>content</code>
property must be <em>replaced</em> or emptied and updated. The content address cannot
be changed by means of the Ember <code>set()</code> command.</p>

<p>Let&#39;s now add the code for fetching all the Shoes. While we&#39;re here, we&#39;ll
also add a <code>find</code> method that will let us look up a single Shoe by its ID. To
make this play nicely for demonstration purposes, we&#39;ll provide a stub object
data source.</p>

<!-- {{{2 --> 
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
</pre></td>
  <td class="code"><pre>App.Shoe = Ember.Object.extend();
App.Shoe.reopenClass({
  <span class="key">_listOfShoes</span>:  Em.A(),
  <span class="key">_stubDataSource</span>:  [
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">rainbow</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Sandals</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$60.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">San Clemente style</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">strappy</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Strappy shoes</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$300.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">I heard Pnlope Cruz say this word once.</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">bluesuede</span><span class="delimiter">'</span></span>, <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Blue Suede</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$125.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">The King would never lie:  TKOB!</span><span class="delimiter">'</span></span> }
        ],
  <span class="function">all</span>:  <span class="keyword">function</span>(){
    <span class="keyword">var</span> allShoes = <span class="local-variable">this</span>._listOfShoes;
    <span class="comment">// Stub an ajax call; like a jQuery.ajax might have done...</span>
    setTimeout( <span class="keyword">function</span>(){
      allShoes.clear();
      allShoes.pushObjects( <span class="local-variable">this</span>._stubDataSource;);
    }, <span class="integer">2000</span>);
    <span class="keyword">return</span> <span class="local-variable">this</span>._listOfShoes;
  },
  <span class="function">find</span>:  <span class="keyword">function</span>(id){
    <span class="keyword">return</span> <span class="local-variable">this</span>._stubDataSource.findProperty(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>, id);
  }
});</pre></td>
</tr></table>
</div>
<!-- }}}2 --> 

<p>After the <code>App.create</code> (but before the <code>App.initialize</code>!), we add the previous
listing.  This code:</p>

<ol>
<li> Declares a class <code>App.Shoe</code></li>
<li> Provides a unique, &quot;private&quot; attribute  called <code>_listOfShoes</code></li>
<li> Provides an <code>all()</code> method.</li>
</ol>

<p>Then the router is initialized and all the Routes are created and attached to
the <code>App.router</code> instance variable.  When the <code>shoes</code> route is entered.
<code>connectOutlets</code> fires and the following happens:</p>

<ol>
<li> <code>App.Shoe.all</code> is called</li>
<li> A local reference (<code>allShoes</code>) to a persistent address (<code>App.Shoe._listOfShoes</code>) is gained </li>
<li> An asynchronous call is made (mocking an AJAX call) that updates in 2
seconds&#39; time</li>
<li> The reference address to <code>App.Shoe._listOfShoes</code> is returned, a pointer to an
empty array (<code>Em.A()</code>)</li>
<li> In <code>connectOutlets</code> this data (an empty array reference) is sent to the
<code>ShoesController</code>&#39;s <code>content</code> property</li>
<li> <em>Asynchronously</em> _listOfShoes is updated ( it is empted by the <code>clear()</code>
method and then loaded with the hard-coded array</li>
<li> Ember&#39;s observers notice that there has been a change at the observed
reference address and they tell the chain of views connected by
<code>connectOutlet</code> to re-render with this new data</li>
</ol>

<p>Thanks to Ember&#39;s bindings, when this is viewed in the browser, the
<code>listOfShoesView</code> renders an empty array (&quot;do an each of my controller&#39;s content,
nothing in there, show nothing&quot;).  Two seconds later that reference&#39;s contents
change and the view is notified of this change (&quot;do an each of my controller&#39;s
content, there are items in there, render them&quot;).</p>

<p>It might have been tempting to do the following in <code>all</code>:</p>

<!--- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
</pre></td>
  <td class="code"><pre>App.Shoe = Ember.Object.extend();
App.Shoe.reopenClass({
  <span class="key">_listOfShoes</span>:  Em.A(),
  <span class="function">all</span>:  <span class="keyword">function</span>(){
    <span class="keyword">var</span> allShoes = <span class="local-variable">this</span>._listOfShoes;
    <span class="comment">// Mock an ajax call</span>
    setTimeout( <span class="keyword">function</span>(){
      <span class="local-variable">this</span>._listOfShoes = 
        [ ...data ... ]
      );
    }, <span class="integer">2000</span>);
    <span class="keyword">return</span> <span class="local-variable">this</span>._listOfShoes;
  }
});</pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<p>By <strong>assigning</strong> a new object reference ID, we have left the view looking at
the <strong>old</strong> reference address but have put our new data at a <strong>new</strong> address.
<strong>The view will not update</strong> if you make this error.</p>

<p>The following code will lead to the <code>shoes</code> route having actual data.  This
listing is a lot of fun.  This code, when you click to the <code>shoes</code> route will
appear empty for 2 seconds (to simulate a very slow AJAX transaction) and then
viol: a listing of the shoes will appear.  This is the pattern that underlies
Ember data and which was wonderfully explained elsewhere by <a href="http://trek.github.com">Trek
Golwaki</a>.</p>

<p>The <code>Shoes</code> route should look like the following:</p>

<p><img src="/images/routing-primer/data-loaded-shoes-route.png"></p>

<p><a href="https://github.com/sgharms/Halbert/commit/8d0e2757723f39191f00bf6741fb751b892b1742"><em>Diff View</em></a></p>

<!--- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
76
77
78
79
<strong>80</strong>
81
82
83
84
85
86
87
88
89
<strong>90</strong>
91
92
93
94
95
96
97
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="key">ShoesView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoesController</span>:  Em.ArrayController.extend(),
  <span class="key">SalutationView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>
  }),
  <span class="key">SalutationController</span>:  Em.ObjectController.extend(),
  <span class="key">TraversalView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>
  }),
  <span class="key">TraversalController</span>:  Em.ObjectController.extend(),
  <span class="key">HomeView</span>:  Em.View.extend({
    <span class="key">template</span>:  Em.Handlebars.compile(<span class="string"><span class="delimiter">'</span><span class="content">&lt;p&gt;&lt;a {{action goHome href=true}}&gt;&lt;em&gt;Go Home&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;</span><span class="delimiter">'</span></span>)
  }),
  <span class="key">HomeController</span>:  Em.ObjectController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">goToCars</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>),
    <span class="key">goToShoes</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>),
    <span class="key">goHome</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>),
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Ember App</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>); }
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>, App.Shoe.all());
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
        }
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cars Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.Shoe = Ember.Object.extend();
App.Shoe.reopenClass({
  <span class="key">_listOfShoes</span>:  Em.A(),
  <span class="function">all</span>:  <span class="keyword">function</span>(){
    <span class="keyword">var</span> allShoes = <span class="local-variable">this</span>._listOfShoes;
    <span class="comment">// Mock an ajax call; like a jQuery.ajax might have done...</span>
    setTimeout( <span class="keyword">function</span>(){
      allShoes.clear();
      allShoes.pushObjects(
        [ 
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">rainbow</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Sandals</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$60.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">San Clemente style</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">strappy</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Strappy shoes</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$300.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">I heard Pnlope Cruz say this word once.</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">bluesuede</span><span class="delimiter">'</span></span>, <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Blue Suede</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$125.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">The King would never lie:  TKOB!</span><span class="delimiter">'</span></span> } 
        ]
      );
    }, <span class="integer">2000</span>);
    <span class="keyword">return</span> <span class="local-variable">this</span>._listOfShoes;
  }
});
App.initialize();</pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<!--- {{{2 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="tag">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">body</span><span class="inline-delimiter">}}</span></span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">footer</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Shoes<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Current Shoes<span class="tag">&lt;/h1&gt;</span>
  &lt;p&gt;
    </span><span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">shoe</span> <span class="attribute-name">in</span> <span class="attribute-name">controller</span><span class="inline-delimiter">}}</span></span>
     <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">with</span> <span class="attribute-name">shoe</span><span class="inline-delimiter">}}</span></span>
        <span class="tag">&lt;li</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">color: #000</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">id</span><span class="inline-delimiter">}}</span></span> | <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> | <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">price</span><span class="inline-delimiter">}}</span></span> : <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">description</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
     <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">with</span><span class="inline-delimiter">}}</span></span>
    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://youtu.be/v_Yx0X-eHn8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>N<span class="entity">&amp;uuml;</span> Shooz?<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">traversal</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  &lt;p&gt;&lt;a </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToCars</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="error">&gt;</span>Go To Cars<span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToShoes</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="tag">&gt;</span>Go To Shoes<span class="tag">&lt;/a&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!--- }}}2 -->

<!--- }}}1 -->

<p>With a model in place that can do our data fetching, let&#39;s make it possible
to go from viewing a list of shoes, to viewing the details about a shoe.</p>

<!-- }}}1 -->
<h2 id='toc_from-a-list-of-shoes-to-a-shoe'>From a List of Shoes to a Shoe</h2>
<p>Here&#39;s the plan:</p>

<ol>
<li> Make a click on the shoe listening do something</li>
<li> Make a something that receives that noficiation change</li>
<li> Make the notification say something like: such-and-such shoe&#39;s details
should be shown</li>
</ol>

<p>In Ember, this is surprisingly easy and should feel a bit familiar if you&#39;ve
been following along with the guide thus far.  To successfully achieve these
goals, the <code>serialize()</code> and <code>deserialize()</code> methods will be covered as will
nested routes and dynamic segments.</p>
<h3 id='toc_add-action-signaling'>Add Action Signaling</h3>
<p>In the handlebars template for <code>ShoesView</code>,  add an action call and
turn the list items&#39; content into anchor tags;</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>
</pre></td>
  <td class="code"><pre>&lt;li&gt;&lt;a{{action showShoe this href=true}}&gt;{{name}}&lt;/a&gt;&lt;/li&gt;</pre></td>
</tr></table>
</div>
<p>Careful readers will note that there&#39;s a <em>new</em> argument in this action call.
The third word is &quot;this&quot; which, in this portion of Handlebars code, will refer
to the particular shoe which bears the <code>name</code> property used on this line.</p>

<p>This helpers says: &quot;If someone clicks here, trigger the action (on the router)
called &quot;showShoe&quot; and pass this shoe to the handler.  Also make sure that this
action helper has a URL associated with it.&quot;  It is the object referred to by
<code>this</code> that will become the &quot;context&quot; in <code>serialize()</code> methods discussed below.</p>
<h3 id='toc_add-a-trigger'>Add a trigger</h3>
<p>In the <code>root.shoes</code> route add:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>
</pre></td>
  <td class="code"><pre>showShoe:  Em.Route.transitionTo('root.shoes.show')</pre></td>
</tr></table>
</div><h3 id='toc_implement-serialize-and-deserialize'>Implement serialize and deserialize</h3>
<p>While the Route translation is working swimmingly there is one small problem.</p>

<p>The issue comes about because the linked items (i.e. the various shoes)  don&#39;t
know how to express their underlying <code>shoe</code> as a url.  They need to learn how
to <code>serialize</code> themselves to make such an expression.  If a Shoe were trying to
express how to find it in URL form, how would it point to itself?  We will
write that method for the route as such:</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>serialize:  function(router, context){
  return {
    id: context.id
  }
}</pre></td>
</tr></table>
</div>
<p>This method expresses that it expects to receive a <code>context</code> object, the &quot;shoe&quot;
object that was passed along as the second argument in the <code>{{action}}</code> call.
That item&#39;s <code>id</code> property will be used to fill in the dynamic portion of the
url slug specified in this <code>Route</code>&#39;s <code>route</code> property (recall it was
&#39;/shoe/:id&#39;)</p>

<p>It should not be surprising that a Route that explains how to serialize its
objects should also need to explain how to <strong>de</strong>serialize its items when a
meaningful URL is given.</p>
<div class="highlight  "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
</pre></td>
  <td class="code"><pre>deserialize:  function(router, context){
  return App.Shoe.find( context.id );
},</pre></td>
</tr></table>
</div>
<p>In this case, the <code>context</code> argument is built like the hash returned from
<code>serialize</code>.  <code>Deserialize</code> will take the context.id and use the &quot;class method&quot;
on <code>Shoe</code> to find the proper data object needed to construct this <code>Route</code>&#39;s
state.</p>

<p>With these components in place, we are able to move from <code>shoes</code> to
<code>/shoes/shoe/strappy</code> or <code>/shoes/shoe/bluesuede</code>.</p>

<p>Here&#39;s the end result:</p>

<p><img src="/images/routing-primer/shoe-route.png"></p>

<!-- {{{2 -->
<div class="highlight javascript "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
76
77
78
79
<strong>80</strong>
81
82
83
84
85
86
87
88
89
<strong>90</strong>
91
92
93
94
95
96
97
98
99
<strong>100</strong>
101
102
103
104
105
106
107
108
109
<strong>110</strong>
111
112
113
114
115
116
117
118
119
<strong>120</strong>
121
122
123
124
125
126
127
128
</pre></td>
  <td class="code"><pre>window.App = Ember.Application.create({
  <span class="key">ApplicationView</span>: Ember.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>,
    <span class="key">classNames</span>: [<span class="string"><span class="delimiter">'</span><span class="content">application-view</span><span class="delimiter">'</span></span>]
  }),
  <span class="key">ApplicationController</span>: Ember.Controller.extend({
    <span class="key">slogan</span>: <span class="string"><span class="delimiter">'</span><span class="content">A framework for creating ambitious web applications</span><span class="delimiter">'</span></span>,
    <span class="key">isSlogan</span>: <span class="predefined-constant">true</span>
  }),
  <span class="key">CarsView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>
  }),
  <span class="key">CarsController</span>:  Em.ArrayController.extend(),
  <span class="key">ShoesView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoesController</span>:  Em.ArrayController.extend(),
  <span class="key">SalutationView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>
  }),
  <span class="key">SalutationController</span>:  Em.ObjectController.extend(),
  <span class="key">ShoeView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">shoe</span><span class="delimiter">'</span></span>
  }),
  <span class="key">ShoeController</span>:  Em.ObjectController.extend(),
  <span class="key">TraversalView</span>:  Em.View.extend({
    <span class="key">templateName</span>:  <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>
  }),
  <span class="key">TraversalController</span>:  Em.ObjectController.extend(),
  <span class="key">HomeView</span>:  Em.View.extend({
    <span class="key">template</span>:  Em.Handlebars.compile(<span class="string"><span class="delimiter">'</span><span class="content">&lt;p&gt;&lt;a {{action goHome href=true}}&gt;&lt;em&gt;Go Home&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;</span><span class="delimiter">'</span></span>)
  }),
  <span class="key">HomeController</span>:  Em.ObjectController.extend(),
  <span class="function">ready</span>: <span class="keyword">function</span>(){
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Created App namespace</span><span class="delimiter">&quot;</span></span>);
  },
  <span class="key">Router</span>: Ember.Router.extend({
    <span class="key">enableLogging</span>:  <span class="predefined-constant">true</span>,
    <span class="key">goToCars</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>),
    <span class="key">goToShoes</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">shoes.index</span><span class="delimiter">'</span></span>),
    <span class="key">goHome</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>),
    <span class="key">root</span>:  Ember.Route.extend({
      <span class="key">index</span>:  Ember.Route.extend({
        <span class="key">route</span>:  <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Ember App</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>); }
      }),
      <span class="key">shoes</span>:  Ember.Route.extend({
        <span class="key">showShoe</span>:  Ember.Route.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">shoes.shoe</span><span class="delimiter">'</span></span>),
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoes</span><span class="delimiter">'</span></span>,
        <span class="key">index</span>:  Ember.Route.extend({
          <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
          <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
            console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoes sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
          },
          <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                              { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes Route</span><span class="delimiter">&quot;</span></span> });
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoes</span><span class="delimiter">'</span></span>, App.Shoe.all());
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
          }
        }),
        <span class="key">shoe</span>:  Ember.Route.extend({
          <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/shoe/:id</span><span class="delimiter">'</span></span>,
          <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
            console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The shoe detail sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
          },
          <span class="function">deserialize</span>:  <span class="keyword">function</span>(router, context){
            <span class="keyword">return</span> App.Shoe.find( context.id );
          },
          <span class="function">serialize</span>:  <span class="keyword">function</span>(router, context){
            <span class="keyword">return</span> {
              <span class="key">id</span>: context.id
            }
          },
          <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, aShoe){
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                              { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoes.Shoe Route</span><span class="delimiter">&quot;</span></span> });
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shoe</span><span class="delimiter">'</span></span>, aShoe);
            router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          }
        })
      }),
      <span class="key">cars</span>:  Ember.Route.extend({
        <span class="key">route</span>: <span class="string"><span class="delimiter">'</span><span class="content">/cars</span><span class="delimiter">'</span></span>,
        <span class="function">enter</span>: <span class="keyword">function</span> ( router ){
          console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The cars sub-state was entered.</span><span class="delimiter">&quot;</span></span>);
        },
        <span class="function">connectOutlets</span>:  <span class="keyword">function</span>(router, context){
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">salutation</span><span class="delimiter">'</span></span>,
                                                            { <span class="key">greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cars Route</span><span class="delimiter">&quot;</span></span> });
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">body</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cars</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">applicationController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">footer</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">traversal</span><span class="delimiter">'</span></span>);
          router.get(<span class="string"><span class="delimiter">'</span><span class="content">traversalController</span><span class="delimiter">'</span></span>).connectOutlet(<span class="string"><span class="delimiter">'</span><span class="content">home</span><span class="delimiter">'</span></span>);
        }
      })
    })
  })
});
App.Shoe = Ember.Object.extend();
App.Shoe.reopenClass({
  <span class="key">_listOfShoes</span>:  Em.A(),
  <span class="key">_stubDataSource</span>:  [
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">rainbow</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Rainbow Sandals</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$60.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">San Clemente style</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">strappy</span><span class="delimiter">'</span></span>,   <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Strappy shoes</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$300.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">I heard Pnlope Cruz say this word once.</span><span class="delimiter">'</span></span> },
          { <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">bluesuede</span><span class="delimiter">'</span></span>, <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Blue Suede</span><span class="delimiter">&quot;</span></span>,
              <span class="key">price</span>: <span class="string"><span class="delimiter">'</span><span class="content">$125.00</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">The King would never lie:  TKOB!</span><span class="delimiter">'</span></span> }
        ],
  <span class="function">all</span>:  <span class="keyword">function</span>(){
    <span class="keyword">var</span> allShoes = <span class="local-variable">this</span>._listOfShoes;
    <span class="comment">// Stub an ajax call; like a jQuery.ajax might have done...</span>
    <span class="keyword">var</span> self = <span class="local-variable">this</span>;
    setTimeout( <span class="keyword">function</span>(){
      allShoes.clear();
      allShoes.pushObjects( self._stubDataSource );
    }, <span class="integer">2000</span>);
    <span class="keyword">return</span> <span class="local-variable">this</span>._listOfShoes;
  },
  <span class="function">find</span>:  <span class="keyword">function</span>(id){
    <span class="keyword">return</span> <span class="local-variable">this</span>._stubDataSource.findProperty(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>, id);
  }
});
App.initialize();</pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<!-- {{{2 -->
<div class="highlight handlebars "><div class="ribbon"></div><table class="CodeRay"><tr>
  <td class="line-numbers" title="double click to toggle" ondblclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">bindAttr</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">isSlogan</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span> <span class="tag">&gt;</span>Ember is: <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">slogan</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">body</span><span class="inline-delimiter">}}</span></span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span> <span class="attribute-name">footer</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Cars<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span>Here in my car / I feel safest of all<span class="tag">&lt;/p&gt;</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Shoes<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;h1&gt;</span>Current Shoes<span class="tag">&lt;/h1&gt;</span>
  &lt;p&gt;
    </span><span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">shoe</span> <span class="attribute-name">in</span> <span class="attribute-name">controller</span><span class="inline-delimiter">}}</span></span>
     <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">with</span> <span class="attribute-name">shoe</span><span class="inline-delimiter">}}</span></span>
        <span class="tag">&lt;li</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">color: #000</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;a</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">showShoe</span> <span class="attribute-name">this</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="tag">&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">id</span><span class="inline-delimiter">}}</span></span> | <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span> | <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">price</span><span class="inline-delimiter">}}</span></span> : <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">description</span><span class="inline-delimiter">}}</span></span> <span class="tag">&lt;/a&gt;</span> <span class="tag">&lt;/li&gt;</span>
     <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">with</span><span class="inline-delimiter">}}</span></span>
    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://youtu.be/v_Yx0X-eHn8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>N<span class="entity">&amp;uuml;</span> Shooz?<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">greeting</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">traversal</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  <span class="tag">&lt;hr</span><span class="tag">/&gt;</span>
  &lt;p&gt;&lt;a </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToCars</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="error">&gt;</span>Go To Cars<span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="attribute-name">goToShoes</span> <span class="attribute-name">href</span>=<span class="attribute-value">true</span><span class="inline-delimiter">}}</span></span><span class="tag">&gt;</span>Go To Shoes<span class="tag">&lt;/a&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/x-handlebars</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-template-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shoe</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">  &lt;h1&gt;Vital facts about ID: </span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">id</span><span class="inline-delimiter">}}</span></span>:  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">name</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;p&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">description</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/script&gt;</span></pre></td>
</tr></table>
</div>
<!-- }}}2 -->

<!-- }}}1 -->
<h2 id='toc_conclusion'>Conclusion</h2>
<p>With this guide you should not have a feel for how to construct an application
using Ember.JS.  You have learned how to define a <code>Router</code>, how to define a
model class, and how each Ember application is conceived of as a finite series
of states.  You have learned to move between states by allowing the URL to
dictate the state, by handing an event on a trigger, or by a direct
console-based invocation of <code>Em.Routable</code> methods.  </p>

<p>You can certainly take this code base in other, interesting directions.  Here
are some ideas:</p>

<ul>
<li>Use Ember.Views to add style to the views and style them in CSS</li>
<li>Try adding your own Routes so that you can get details on <code>cars</code></li>
<li>Learn more Handlebars helpers, experiment with <code>#with</code> and <code>#each</code>.</li>
</ul>

<p>Have fun, experiment, and we look forward to seeing you in the IRC channel and
accepting your pull requests on GitHub.</p>

<hr>
<h2 id='toc_footnotes'>Footnotes</h2>
<ol>
<li><p><a id="location-manager"></a>The default location manager, &quot;HashLocation,&quot;  signifies various routes by
means of <code>/#/</code>.  To change this behavior, set the <code>location</code> property on the
Router to <strong>any</strong> <code>Ember.Object</code> that implements the methods specified in the
<code>Ember.Location</code> API.  For more information, consult the <code>Ember.Location</code>
<a href="https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/location/api.js" title="Ember.Location API Source Code">API</a>.</p></li>
<li><p><a id="view-preserves-context"></a>This was not always the case in Ember.  Previously the Views preserved the
context.  As of Ember 0.9.8 the change was made to have the context cascade
down-over views until either template or the view&#39;s controller forcibly changed
the context.  This adds much flexibility and sense.</p></li>
</ol>

<!-- {{{1 -->

<!-- }}}1 -->
<h2 id='toc_acknowledgments'>Acknowledgments</h2>
<p>Big thanks to the Ember core team for enduring my many, many questions over
these last several weeks.  I owe a special thanks to Trek G. for his review of
this document, encouragement, and his efforts in documentation of this toolkit.
I also wish to call out <a href="http://www.solitr.com/blog/">Jo Liss</a> whose frequent in-code documentation
annotations made it possible for this to be written.</p>

<!-- vim: set wrap fdm=marker ft=markdown tw=79: -->
	
</article>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">Copyright 2012 <a href="http://tilde.io">Tilde Inc.</a><br>Design by <a href="http://www.heropixel.com">HeroPixel</a></div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">Twitter</a>
          <a class="github" href="https://github.com/emberjs/ember.js">GitHub</a>
          
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
